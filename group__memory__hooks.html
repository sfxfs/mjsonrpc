<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mjsonrpc: Memory Management Hooks</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">mjsonrpc<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">A lightweight JSON-RPC 2.0 message parser and generator based on cJSON</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Memory Management Hooks</div></div>
</div><!--header-->
<div class="contents">

<p>Custom memory management function hooks.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga67675258e05e68090a3fadd1bd0cd064" id="r_ga67675258e05e68090a3fadd1bd0cd064"><td class="memItemLeft" align="right" valign="top">typedef void *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__memory__hooks.html#ga67675258e05e68090a3fadd1bd0cd064">mjrpc_malloc_func</a>) (size_t size)</td></tr>
<tr class="memdesc:ga67675258e05e68090a3fadd1bd0cd064"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function pointer type for custom memory allocation.  <br /></td></tr>
<tr class="separator:ga67675258e05e68090a3fadd1bd0cd064"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga32c594346b574a7712f6a2f93d9c418c" id="r_ga32c594346b574a7712f6a2f93d9c418c"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__memory__hooks.html#ga32c594346b574a7712f6a2f93d9c418c">mjrpc_free_func</a>) (void *ptr)</td></tr>
<tr class="memdesc:ga32c594346b574a7712f6a2f93d9c418c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function pointer type for custom memory deallocation.  <br /></td></tr>
<tr class="separator:ga32c594346b574a7712f6a2f93d9c418c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad48de6b4d68a882d0e595b504ce49c70" id="r_gad48de6b4d68a882d0e595b504ce49c70"><td class="memItemLeft" align="right" valign="top">typedef char *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__memory__hooks.html#gad48de6b4d68a882d0e595b504ce49c70">mjrpc_strdup_func</a>) (const char *str)</td></tr>
<tr class="memdesc:gad48de6b4d68a882d0e595b504ce49c70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function pointer type for custom string duplication.  <br /></td></tr>
<tr class="separator:gad48de6b4d68a882d0e595b504ce49c70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga15f100956f60cf78f6eac175b105a0e9" id="r_ga15f100956f60cf78f6eac175b105a0e9"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__memory__hooks.html#ga15f100956f60cf78f6eac175b105a0e9">mjrpc_error_log_func</a>) (const char *message, int error_code)</td></tr>
<tr class="memdesc:ga15f100956f60cf78f6eac175b105a0e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function pointer type for error logging callback.  <br /></td></tr>
<tr class="separator:ga15f100956f60cf78f6eac175b105a0e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga0d2da3f4fe7ade41032143097cb0de32" id="r_ga0d2da3f4fe7ade41032143097cb0de32"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__memory__hooks.html#ga0d2da3f4fe7ade41032143097cb0de32">mjrpc_set_memory_hooks</a> (<a class="el" href="group__memory__hooks.html#ga67675258e05e68090a3fadd1bd0cd064">mjrpc_malloc_func</a> malloc_func, <a class="el" href="group__memory__hooks.html#ga32c594346b574a7712f6a2f93d9c418c">mjrpc_free_func</a> free_func, <a class="el" href="group__memory__hooks.html#gad48de6b4d68a882d0e595b504ce49c70">mjrpc_strdup_func</a> strdup_func)</td></tr>
<tr class="memdesc:ga0d2da3f4fe7ade41032143097cb0de32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set custom memory management functions.  <br /></td></tr>
<tr class="separator:ga0d2da3f4fe7ade41032143097cb0de32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9f3ddb2b7f3132e7e954eccecbb0a944" id="r_ga9f3ddb2b7f3132e7e954eccecbb0a944"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__memory__hooks.html#ga9f3ddb2b7f3132e7e954eccecbb0a944">mjrpc_set_error_log_hook</a> (<a class="el" href="group__memory__hooks.html#ga15f100956f60cf78f6eac175b105a0e9">mjrpc_error_log_func</a> error_log_func)</td></tr>
<tr class="memdesc:ga9f3ddb2b7f3132e7e954eccecbb0a944"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set custom error logging function.  <br /></td></tr>
<tr class="separator:ga9f3ddb2b7f3132e7e954eccecbb0a944"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Custom memory management function hooks. </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga15f100956f60cf78f6eac175b105a0e9" name="ga15f100956f60cf78f6eac175b105a0e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga15f100956f60cf78f6eac175b105a0e9">&#9670;&#160;</a></span>mjrpc_error_log_func</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mjrpc_error_log_func</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function pointer type for error logging callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>Error message string </td></tr>
    <tr><td class="paramname">error_code</td><td>Optional error code (0 if not applicable)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Can be used to integrate with application logging systems </dd></dl>

<p class="definition">Definition at line <a class="el" href="mjsonrpc_8h_source.html#l00238">238</a> of file <a class="el" href="mjsonrpc_8h_source.html">mjsonrpc.h</a>.</p>

</div>
</div>
<a id="ga32c594346b574a7712f6a2f93d9c418c" name="ga32c594346b574a7712f6a2f93d9c418c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga32c594346b574a7712f6a2f93d9c418c">&#9670;&#160;</a></span>mjrpc_free_func</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mjrpc_free_func</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function pointer type for custom memory deallocation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>Pointer to memory to free (can be NULL)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Should behave like standard free() function </dd></dl>

<p class="definition">Definition at line <a class="el" href="mjsonrpc_8h_source.html#l00216">216</a> of file <a class="el" href="mjsonrpc_8h_source.html">mjsonrpc.h</a>.</p>

</div>
</div>
<a id="ga67675258e05e68090a3fadd1bd0cd064" name="ga67675258e05e68090a3fadd1bd0cd064"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga67675258e05e68090a3fadd1bd0cd064">&#9670;&#160;</a></span>mjrpc_malloc_func</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mjrpc_malloc_func</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function pointer type for custom memory allocation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>Number of bytes to allocate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to allocated memory, or NULL on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Should behave like standard malloc() function </dd></dl>

<p class="definition">Definition at line <a class="el" href="mjsonrpc_8h_source.html#l00206">206</a> of file <a class="el" href="mjsonrpc_8h_source.html">mjsonrpc.h</a>.</p>

</div>
</div>
<a id="gad48de6b4d68a882d0e595b504ce49c70" name="gad48de6b4d68a882d0e595b504ce49c70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad48de6b4d68a882d0e595b504ce49c70">&#9670;&#160;</a></span>mjrpc_strdup_func</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mjrpc_strdup_func</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function pointer type for custom string duplication. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">str</td><td>String to duplicate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to newly allocated duplicate string, or NULL on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Should behave like standard strdup() function </dd></dl>

<p class="definition">Definition at line <a class="el" href="mjsonrpc_8h_source.html#l00227">227</a> of file <a class="el" href="mjsonrpc_8h_source.html">mjsonrpc.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga9f3ddb2b7f3132e7e954eccecbb0a944" name="ga9f3ddb2b7f3132e7e954eccecbb0a944"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9f3ddb2b7f3132e7e954eccecbb0a944">&#9670;&#160;</a></span>mjrpc_set_error_log_hook()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mjrpc_set_error_log_hook </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__memory__hooks.html#ga15f100956f60cf78f6eac175b105a0e9">mjrpc_error_log_func</a>&#160;</td>
          <td class="paramname"><em>error_log_func</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set custom error logging function. </p>
<p>This function allows users to set a callback function that will be called when errors occur within the mjsonrpc library. This enables integration with application logging systems for debugging and monitoring.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">error_log_func</td><td>Custom error logging callback function</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Pass NULL to disable error logging (default behavior) </dd>
<dd>
The callback will be invoked for critical errors such as:<ul>
<li>Memory allocation failures</li>
<li>Hash table resize issues</li>
<li>Method rehash failures</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Example:</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">void</span> my_error_logger(<span class="keyword">const</span> <span class="keywordtype">char</span> *msg, <span class="keywordtype">int</span> code) {</div>
<div class="line">    fprintf(stderr, <span class="stringliteral">&quot;[MJSONRPC ERROR] %s (code: %d)\n&quot;</span>, msg, code);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Enable error logging</span></div>
<div class="line"><a class="code hl_function" href="group__memory__hooks.html#ga9f3ddb2b7f3132e7e954eccecbb0a944">mjrpc_set_error_log_hook</a>(my_error_logger);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Disable error logging</span></div>
<div class="line"><a class="code hl_function" href="group__memory__hooks.html#ga9f3ddb2b7f3132e7e954eccecbb0a944">mjrpc_set_error_log_hook</a>(NULL);</div>
<div class="ttc" id="agroup__memory__hooks_html_ga9f3ddb2b7f3132e7e954eccecbb0a944"><div class="ttname"><a href="group__memory__hooks.html#ga9f3ddb2b7f3132e7e954eccecbb0a944">mjrpc_set_error_log_hook</a></div><div class="ttdeci">int mjrpc_set_error_log_hook(mjrpc_error_log_func error_log_func)</div><div class="ttdoc">Set custom error logging function.</div></div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="ga0d2da3f4fe7ade41032143097cb0de32" name="ga0d2da3f4fe7ade41032143097cb0de32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0d2da3f4fe7ade41032143097cb0de32">&#9670;&#160;</a></span>mjrpc_set_memory_hooks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mjrpc_set_memory_hooks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__memory__hooks.html#ga67675258e05e68090a3fadd1bd0cd064">mjrpc_malloc_func</a>&#160;</td>
          <td class="paramname"><em>malloc_func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__memory__hooks.html#ga32c594346b574a7712f6a2f93d9c418c">mjrpc_free_func</a>&#160;</td>
          <td class="paramname"><em>free_func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__memory__hooks.html#gad48de6b4d68a882d0e595b504ce49c70">mjrpc_strdup_func</a>&#160;</td>
          <td class="paramname"><em>strdup_func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set custom memory management functions. </p>
<p>This function allows users to override the default memory management functions used by the mjsonrpc library. All parameters must be provided together, or pass NULL for all to reset to default standard library functions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">malloc_func</td><td>Custom malloc function (required if not resetting) </td></tr>
    <tr><td class="paramname">free_func</td><td>Custom free function (required if not resetting) </td></tr>
    <tr><td class="paramname">strdup_func</td><td>Custom strdup function (required if not resetting)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MJRPC_RET_OK on success, MJRPC_RET_ERROR_INVALID_PARAM on invalid parameters</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Call this function before creating any <a class="el" href="structmjrpc__handle.html" title="Main handle structure for managing RPC methods.">mjrpc_handle</a> or processing requests </dd>
<dd>
To reset to default functions, pass NULL for all parameters </dd>
<dd>
These hooks only affect memory allocations made by mjsonrpc internally (handle, method names, error messages). They do NOT affect cJSON's own allocations. Strings returned by <a class="el" href="group__request__processing.html#ga6b14c69b05520c024f7cebd7ada5c19e" title="Process a JSON-RPC request string.">mjrpc_process_str()</a> are allocated by cJSON (via cJSON_PrintUnformatted) and must be freed with standard free().</dd></dl>
<dl class="section user"><dt>Example:</dt><dd><div class="fragment"><div class="line"><span class="comment">// Set custom memory functions</span></div>
<div class="line"><a class="code hl_function" href="group__memory__hooks.html#ga0d2da3f4fe7ade41032143097cb0de32">mjrpc_set_memory_hooks</a>(my_malloc, my_free, my_strdup);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Reset to default functions</span></div>
<div class="line"><a class="code hl_function" href="group__memory__hooks.html#ga0d2da3f4fe7ade41032143097cb0de32">mjrpc_set_memory_hooks</a>(NULL, NULL, NULL);</div>
<div class="ttc" id="agroup__memory__hooks_html_ga0d2da3f4fe7ade41032143097cb0de32"><div class="ttname"><a href="group__memory__hooks.html#ga0d2da3f4fe7ade41032143097cb0de32">mjrpc_set_memory_hooks</a></div><div class="ttdeci">int mjrpc_set_memory_hooks(mjrpc_malloc_func malloc_func, mjrpc_free_func free_func, mjrpc_strdup_func strdup_func)</div><div class="ttdoc">Set custom memory management functions.</div></div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
