<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mjsonrpc: mjsonrpc - A JSON-RPC 2.0 Message Parser and Generator Based on cJSON</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">mjsonrpc<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">A lightweight JSON-RPC 2.0 message parser and generator based on cJSON</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">mjsonrpc - A JSON-RPC 2.0 Message Parser and Generator Based on cJSON </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> <img src="https://img.shields.io/github/actions/workflow/status/sfxfs/mjsonrpc/ci.yml" alt="GitHub Actions Workflow Status" class="inline"/> <img src="https://img.shields.io/github/license/sfxfs/mjsonrpc" alt="GitHub License" class="inline"/> <img src="https://img.shields.io/github/commit-activity/t/sfxfs/mjsonrpc" alt="GitHub commit activity" class="inline"/> <img src="https://img.shields.io/github/languages/top/sfxfs/mjsonrpc" alt="GitHub top language" class="inline"/> <img src="https://img.shields.io/github/repo-size/sfxfs/mjsonrpc" alt="GitHub repo size" class="inline"/> <img src="https://img.shields.io/github/downloads/sfxfs/mjsonrpc/latest/total" alt="GitHub Downloads (all assets, latest release)" class="inline"/></p>
<p>[ English | 中文 ]</p>
<h2>Introduction</h2>
<p>This project is lightweight, has minimal dependencies, and can be integrated into various communication methods (TCP, UDP, message queues, etc.). It is simple to use (with only a few functional APIs) and has good performance (using hash-based indexing instead of polling all methods). It also supports batch calls (JSON Array), automatic generation of corresponding error messages or custom error messages based on requests, customizable memory management hooks, and notification requests.</p>
<h2>How to Use</h2>
<p>Simply add the project source files (<b>mjsonrpc.c</b>, <b><a class="el" href="mjsonrpc_8h.html" title="A lightweight JSON-RPC 2.0 message parser and generator based on cJSON.">mjsonrpc.h</a></b>) and the cJSON library to your own project and compile them together. Alternatively, you can compile them into a dynamic library and link it.</p>
<h2>Function Definitions</h2>
<p>For detailed API descriptions, please refer to <b><a class="el" href="mjsonrpc_8h.html" title="A lightweight JSON-RPC 2.0 message parser and generator based on cJSON.">src/mjsonrpc.h</a></b> and <a href="https://sfxfs.github.io/mjsonrpc">Doxygen docs of this repo</a>.</p>
<h2>Example</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="mjsonrpc_8h.html">mjsonrpc.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Define a simple JSON-RPC method</span></div>
<div class="line">cJSON *hello_world(<a class="code hl_struct" href="structmjrpc__func__ctx__t.html">mjrpc_func_ctx_t</a> *context, cJSON *params, cJSON *<span class="keywordtype">id</span>) {</div>
<div class="line">    cJSON *result = cJSON_CreateString(<span class="stringliteral">&quot;Hello, World!&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    <span class="comment">// Initialize mjrpc_handle_t</span></div>
<div class="line">    <a class="code hl_struct" href="structmjrpc__handle.html">mjrpc_handle_t</a>* handle = <a class="code hl_function" href="group__handle__management.html#gacb89ae0f934eef67fdca65012d93a26a">mjrpc_create_handle</a>(0);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Add a method</span></div>
<div class="line">    <a class="code hl_function" href="group__method__management.html#gaf5598bbe9436b5eb2993ac7d6e5ce07c">mjrpc_add_method</a>(handle, hello_world, <span class="stringliteral">&quot;hello&quot;</span>, NULL);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Construct a JSON-RPC request</span></div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *json_request = <span class="stringliteral">&quot;{\&quot;jsonrpc\&quot;:\&quot;2.0\&quot;,\&quot;method\&quot;:\&quot;hello\&quot;,\&quot;id\&quot;:1}&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Process the request</span></div>
<div class="line">    <span class="keywordtype">int</span> result;</div>
<div class="line">    <span class="keywordtype">char</span> *json_response = <a class="code hl_function" href="group__request__processing.html#ga5298fa7f4e5aa20bcb356e49ed1301bc">mjrpc_process_str</a>(handle, json_request, &amp;result);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Check return code</span></div>
<div class="line">    <span class="keywordflow">if</span> (result != <a class="code hl_enumvalue" href="mjsonrpc_8h.html#a159beeddeec0dd1c9c984dadbd8e80bbaee79517c749559ac340fe6672c928937">MJRPC_RET_OK</a>) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error processing request: %d\n&quot;</span>, result);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Check response string</span></div>
<div class="line">    <span class="keywordflow">if</span> (json_response) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Response: %s\n&quot;</span>, json_response);</div>
<div class="line">        free(json_response);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Cleanup</span></div>
<div class="line">    <a class="code hl_function" href="group__handle__management.html#ga5436878cf8f44deaf9e198006092c439">mjrpc_destroy_handle</a>(handle);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__handle__management_html_ga5436878cf8f44deaf9e198006092c439"><div class="ttname"><a href="group__handle__management.html#ga5436878cf8f44deaf9e198006092c439">mjrpc_destroy_handle</a></div><div class="ttdeci">int mjrpc_destroy_handle(mjrpc_handle_t *handle)</div><div class="ttdoc">Destroy a JSON-RPC handle and free all associated memory.</div></div>
<div class="ttc" id="agroup__handle__management_html_gacb89ae0f934eef67fdca65012d93a26a"><div class="ttname"><a href="group__handle__management.html#gacb89ae0f934eef67fdca65012d93a26a">mjrpc_create_handle</a></div><div class="ttdeci">mjrpc_handle_t * mjrpc_create_handle(size_t initial_capacity)</div><div class="ttdoc">Create a new JSON-RPC handle.</div></div>
<div class="ttc" id="agroup__method__management_html_gaf5598bbe9436b5eb2993ac7d6e5ce07c"><div class="ttname"><a href="group__method__management.html#gaf5598bbe9436b5eb2993ac7d6e5ce07c">mjrpc_add_method</a></div><div class="ttdeci">int mjrpc_add_method(mjrpc_handle_t *handle, mjrpc_func function_pointer, const char *method_name, void *arg2func)</div><div class="ttdoc">Register a new RPC method.</div></div>
<div class="ttc" id="agroup__request__processing_html_ga5298fa7f4e5aa20bcb356e49ed1301bc"><div class="ttname"><a href="group__request__processing.html#ga5298fa7f4e5aa20bcb356e49ed1301bc">mjrpc_process_str</a></div><div class="ttdeci">char * mjrpc_process_str(mjrpc_handle_t *handle, const char *request_str, int *ret_code)</div><div class="ttdoc">Process a JSON-RPC request string.</div></div>
<div class="ttc" id="amjsonrpc_8h_html"><div class="ttname"><a href="mjsonrpc_8h.html">mjsonrpc.h</a></div><div class="ttdoc">A lightweight JSON-RPC 2.0 message parser and generator based on cJSON.</div></div>
<div class="ttc" id="amjsonrpc_8h_html_a159beeddeec0dd1c9c984dadbd8e80bbaee79517c749559ac340fe6672c928937"><div class="ttname"><a href="mjsonrpc_8h.html#a159beeddeec0dd1c9c984dadbd8e80bbaee79517c749559ac340fe6672c928937">MJRPC_RET_OK</a></div><div class="ttdeci">@ MJRPC_RET_OK</div><div class="ttdoc">Operation completed successfully.</div><div class="ttdef"><b>Definition</b> <a href="mjsonrpc_8h_source.html#l00087">mjsonrpc.h:87</a></div></div>
<div class="ttc" id="astructmjrpc__func__ctx__t_html"><div class="ttname"><a href="structmjrpc__func__ctx__t.html">mjrpc_func_ctx_t</a></div><div class="ttdoc">Context structure passed to RPC method callback functions.</div><div class="ttdef"><b>Definition</b> <a href="mjsonrpc_8h_source.html#l00121">mjsonrpc.h:122</a></div></div>
<div class="ttc" id="astructmjrpc__handle_html"><div class="ttname"><a href="structmjrpc__handle.html">mjrpc_handle</a></div><div class="ttdoc">Main handle structure for managing RPC methods.</div><div class="ttdef"><b>Definition</b> <a href="mjsonrpc_8h_source.html#l00174">mjsonrpc.h:175</a></div></div>
</div><!-- fragment --><h2>References</h2>
<ul>
<li><a href="https://github.com/DaveGamble/cJSON">DaveGamble/cJSON</a></li>
<li><a href="https://www.jsonrpc.org/specification">JSON-RPC Specification</a></li>
<li><a href="https://github.com/hmng/jsonrpc-c">hmng/jsonrpc-c</a> </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
